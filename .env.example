# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string for HDB resale transaction data
# Format: postgresql+psycopg2://user:password@host:port/database
# Default Docker Compose setup uses hdb:hdb@localhost:5432/hdb
DATABASE_URL=postgresql+psycopg2://hdb:hdb@localhost:5432/hdb

# =============================================================================
# LLM PROVIDER CONFIGURATION (OpenRouter)
# =============================================================================

# OpenRouter API key for LLM access (Target Agent + Planner Agent)
# Get your key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=YOUR_OPENROUTER_API_KEY                                          # UPDATE THIS

# Primary LLM model for agent inference
# Options: minimax/minimax-m2.1, openai/gpt-4o, anthropic/claude-3.5-sonnet, etc.
# See available models: https://openrouter.ai/models
OPENROUTER_MODEL_NAME=minimax/minimax-m2.1

# Fallback models if primary model fails (JSON array)
# These will be tried in order if the primary model is unavailable
OPENROUTER_FALLBACK_MODELS=["z-ai/glm-4.7", "openai/gpt-4o-mini"]

# =============================================================================
# EMBEDDING PROVIDER CONFIGURATION (Jina AI)
# =============================================================================

# Jina API key for generating text embeddings
# Get your key from: https://jina.ai/embeddings/
JINA_API_KEY=YOUR_JINA_API_KEY                                                      # UPDATE THIS

# Jina API base URL (should not need to change)
JINA_BASE_URL=https://api.jina.ai/v1

# Embedding model name
# IMPORTANT: Changing this requires re-running db/ingest.py to regenerate embeddings
EMBEDDING_MODEL_NAME=jinaai/jina-embeddings-v3

# Embedding vector dimension (must match model output)
# IMPORTANT: Must match EMBEDDING_MODEL_NAME output dimension
# jina-embeddings-v3 = 1024, jina-embeddings-v2 = 768
# Changing this requires re-running db/ingest.py AND db/schema.sql
EMBEDDING_DIM=1024

# =============================================================================
# HYBRID RETRIEVAL CONFIGURATION
# =============================================================================

# Reciprocal Rank Fusion (RRF) weights for hybrid search
# RRF combines vector similarity and BM25 text search rankings
# Weights must sum to 1.0

# Weight for vector similarity ranking (semantic similarity)
RRF_VECTOR_WEIGHT=0.3

# Weight for BM25 text search ranking (keyword matching)
RRF_BM25_WEIGHT=0.7

# =============================================================================
# DATA INGESTION CONFIGURATION
# =============================================================================

# Number of recent years to ingest from HDB CSV data
# Filters data to only include transactions from last N years
# Lower value = faster ingestion, smaller database, less context
INGEST_YEARS=2

# Path to HDB resale flat prices CSV file
# Download from: https://data.gov.sg/dataset/resale-flat-prices
# File format: "Resale flat prices based on registration date from Jan 2017 onwards"
INGEST_CSV_PATH=data/ResaleflatpricesbasedonregistrationdatefromJan2017onwards.csv

# =============================================================================
# OBSERVABILITY CONFIGURATION (BrainTrust)
# =============================================================================

# BrainTrust API key for LLM tracing and evaluation
# Optional: Leave as YOUR_BRAINTRUST_API_KEY to disable tracing
# Get your key from: https://www.braintrust.dev/
BRAINTRUST_API_KEY=YOUR_BRAINTRUST_API_KEY                                      # UPDATE THIS

# BrainTrust project identifier for organizing traces
# Format: project_name:your-project-name
BRAINTRUST_PARENT=project_name:hdb-comparable-flats
